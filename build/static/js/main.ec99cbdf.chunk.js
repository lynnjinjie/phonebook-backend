(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),l=t(3),s=t.n(l),i="/api/persons",m=function(){return s.a.get(i).then((function(e){return e.data}))},f=function(e){return s.a.post(i,e).then((function(e){return e.data}))},d=function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){var n=e.persons,t=e.setPersons,o=Object(a.useState)(""),c=Object(u.a)(o,2),l=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,"filter show with:",r.a.createElement("input",{value:l,onChange:function(e){s(e.target.value);var a=n.filter((function(e){return e.name.toLocaleLowerCase().includes(l.toLocaleLowerCase())}));t(a)}}))},E=function(e){var n=e.persons,t=e.setPersons,o=e.setErrorMessage,c=Object(a.useState)(""),l=Object(u.a)(c,2),s=l[0],i=l[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),h=d[0],E=d[1];return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:s,onChange:function(e){i(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:h,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var a=n.find((function(e){return e.name===s}));(console.log(a),a)?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&p(a.id,{name:s,number:h}).then((function(e){t(n.map((function(n){return n.id!==a.id?n:e})))})).catch((function(e){o(" Information of ".concat(a.name," has already been removed from server")),setTimeout((function(){o(null)}),5e3)})):f({name:s,number:h}).then((function(e){t(n.concat(e)),i("")})).catch((function(e){o(e.response.data.error),setTimeout((function(){o(null)}),5e3),console.log(e.response.data)}))}},"add")))},b=function(e){var n=e.persons,t=e.setPersons;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,"\xa0",r.a.createElement("button",{onClick:function(){var a,r;a=e.id,r=e.name,console.log(r),window.confirm("Delete ".concat(r,"?"))&&d(a).then((function(e){console.log("res",e),t(n.filter((function(e){return e.id!==a})))}))}},"delete"))})))},v=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},g=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(null),l=Object(u.a)(c,2),s=l[0],i=l[1];return Object(a.useEffect)((function(){m().then((function(e){return o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:s}),r.a.createElement(h,{persons:t,setPersons:o}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(E,{persons:t,setPersons:o,setErrorMessage:i}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(b,{persons:t,setPersons:o}))};t(36);c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ec99cbdf.chunk.js.map